---
ID: 288
post_title: 软件平台迁移
author: riv
post_date: 2010-10-18 13:37:18
post_excerpt: ""
layout: post
permalink: >
  http://snowriver.org/blog/2010/10/18/%e8%bd%af%e4%bb%b6%e5%b9%b3%e5%8f%b0%e8%bf%81%e7%a7%bb/
published: true
---
软件存在时间长了之后平台总会让人觉得落伍了。在各种力量的推动之下就会开始平台的迁移。但平台迁移到初衷到底是什么？是客户关心软件平台？是新软件平台可以提高业务的开发效率？还是纯粹的技术驱动？

经常会有人告诉我C++已经过时了，C++经常会有内存泄露，JAVA更时髦。内存泄露是C++的内建特性吗？JAVA就没有内存泄露吗？其实这完全是人们对C++理解不深入所造成的误解。C++只要遵循几个基本的准侧完全可以避免内存泄露，只有在性能非常关键的地方自己管理内存，并且谁分配谁释放，其它时候只要使用STL之类的标准库就可以了。JAVA如果用不好照样会有内存泄露，而且内存泄露会特别难找。几乎每种语言都有自己的优缺点，要不然早就灭亡了。C++的优点主要有二，一为内存和性能，二为行为可预知。JAVA最大的优点也有二，一为众多的开发类工具，二为众多的库。

那么从C++平台移植到JAVA平台有没有必要呢？那要看具体的目的了，而不是只是某些人觉得C++过时了。即使C，汇编在某些场合下也无法被替代，有他们各自的一块天地。其实客户才不关心最终是用什么语言实现。为了平台独立？C++也完全可以。为了开发效率？原来的平台都已经实现了，平台移植之后需要开发多少新功能才能达到平衡点。JAVA现在开发效率其实并不高，比JAVA开发效率高的语言多的是。

如果已经决定要移植平台了，那么怎么移植呢？重新实现一套？从外面引入一个平台？一步一步更新平台？

先说重新实现一套。如果让同样水平的另一拨人去完全重新开发，那么最后的水平也高不了多少。如果原来的那一拨人重新实现，那一拨人思维已经比较固化，实现的系统会比原来的好一些，所有的行为和原来差不多。最好是原来的那拨人，加上更高水平的新鲜血液，还得给足够的时间。

再说引入一个平台。引入的那个平台和原平台相比有多大的优势，有多少相似性。很多系统平台之是起支撑作用，更重要的业务逻辑。如果平台希望迁移，业务希望保留，大相似性就非常重要的。往往会决定移植后才觉得移植后的平台需要很多工作之后才能真正使用。

一步一步更新平台。这种策略比较稳，但是也就不会有很大的变化。

我经历的一个平台移植就是一个完全错误的决定。希望引入一个平台，平台迁移的目的没有考虑清楚，而且那个平台差距就比较大，而且当时决定所有的业务逻辑要在新平台重新写，导致了花了很多精力之后新平台还是不能使用。最终...