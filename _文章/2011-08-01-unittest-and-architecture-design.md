---
ID: 569
post_title: 也谈单元测试拯救了架构设计?
author: riv
post_date: 2011-08-01 16:28:32
post_excerpt: ""
layout: post
permalink: >
  http://snowriver.org/blog/2011/08/01/unittest-and-architecture-design/
published: true
---
Honnix在blog里写了一篇"单元测试拯救了架构设计?" 我也有感而发, 谈谈自己对这方面的看法. 虽然我现在已经和架构设计逐渐偏离, 但是我对架构设计还是由衷的热爱.

首先关于什么是好的架构设计,什么是架构设计的水平? 我心中的评价标准为. 所以以我心中的标准, 架构设计的水平越高越好. 
<ol>
	<li>简洁明了</li>
	<li>模块之间既相互独立又有机融合</li>
	<li>初级程序员可以根据设计说明做具体的任务</li>
	<li>大部分程序员能够明白架构设计理念. 而不是只有架构设计者</li>
	<li>架构易于演进, 易于测试, 易于添加分析统计功能</li>
	<li>把大部分异常处理当作正常流程处理</li>
	<li>团队成员喜欢并乐于维护这个架构. 而不是架构只是架构设计者一个人的宝贝. 团队其他成员恨不得重写一个</li>
</ol>

关于如何做单元测试. 我认为那是一个度的问题. 从设计之初需要考虑如何做单元测试. 但是并不是把所有代码都写成可以做单元测试. 因为并不是所有的代码都适合做单元测试. 如果仅仅将单元测试作为一个唯一标准, 那么自然会导致需要各式各样的注入, 使整个结构异常难于理解. 所以在模块内部可以有一定的耦合性.

作为比单元测试层次更高一层的测试模块测试. 我认为这一个层次测试就需要更加解耦一些. 不能说只能整个系统集成时才能测试这个模块. 

作为架构设计师, 中庸是最好的方式. 对任何东西都需要有一个平衡. 单元测试重要不重要, 是重要. 但是单元测试不是全部. 如果仅仅因为单元测试引入了太多的复杂性, 那还不如将这部分测试放到模块测试中去.

